<?xml version="1.0" encoding="utf-8" ?> 
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EquityX.Pages.HomePage"
             xmlns:vm="clr-namespace:EquityX.ViewModels"
             xmlns:model="clr-namespace:EquityX.Models"
             x:DataType="vm:HomeViewModel"
             >
    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Fill" Margin="10">
    
        
        <!-- User Welcome back -->
        <Label 
            Text="Welcome back"
            FontSize="50"/>

        <Label 
            Text="{Binding Name}"
            FontSize="50"
            TextColor="{StaticResource Primary}"/>


        <!-- Displaying user funds and functionality -->
        <Border
            HeightRequest="200"
            Style="{StaticResource Material}">
                
            <Border.StrokeShape>
                <RoundRectangle         
                    CornerRadius="20" />
            </Border.StrokeShape>

            <Grid
                Margin="10"
                ColumnDefinitions="*"
                RowDefinitions="*">


                <Label
                    Text="Available Funds:" 
                    HorizontalOptions="Start"
                    FontSize="20"/>
                
                <Label
                    Text="{Binding AvailableFunds}" 
                    HorizontalOptions="Center"
                    FontSize="20"/>

                <HorizontalStackLayout HorizontalOptions="Center" VerticalOptions="End">
                    
                    <!--  Add funds button -->
                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Margin="10">
                        
                        <!--This is testing the clicked event to send data to the code hehind-->
                        <!--<Entry
                            x:Name="Money"
                            Placeholder="Enter Amount"
                            Text="Enter money bitch"
                            Keyboard="Numeric"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"
                            WidthRequest="100"
                            MaxLength="10"
                            />
                        <Button 
                            Style="{StaticResource PrimaryHomeButton}"   
                            WidthRequest="30"
                            Clicked="OnClicked_TestMethod"
                            />-->     
                        
                        <Button 
                            Style="{StaticResource PrimaryHomeButton}"   
                            WidthRequest="30"
                            Command="{Binding AddFundsCommand}"/>

                        <Label
                            Text="Add" 
                            TextColor="{StaticResource Primary}"/>
                        
                    </VerticalStackLayout>

                    <!-- Invest button -->
                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Margin="10">
                        <Button
                            Style="{StaticResource PrimaryHomeButton}" 
                            WidthRequest="30"
                            Command="{Binding InvestCommand}"/>

                        <Label
                            Text="Invest" 
                            TextColor="{StaticResource Primary}"/>
                    </VerticalStackLayout>

                    <!-- Withdraw funds button -->
                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="End" Margin="10">
                        <Button
                            Style="{StaticResource PrimaryHomeButton}" 
                            WidthRequest="30" 
                            Command="{Binding WithdrawCommand }"/>

                        <Label
                            Text="Withdraw" 
                            TextColor="{StaticResource Primary}"/>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
                
            </Grid>
        </Border>

        <!-- Todays Top movers text -->
        <HorizontalStackLayout HeightRequest="50" HorizontalOptions="Center" Spacing="150" VerticalOptions="Center">
            <Label
                VerticalTextAlignment="Center"
                Text="Today's Top Movers"/>
            <Button 
                Text="See All"
                BackgroundColor="Transparent"
                BorderColor="Transparent"
                TextColor="{StaticResource Primary}"/>      
        </HorizontalStackLayout>

        
        <!-- Displaying top movers -->
        <Border
            Margin="10"
            HeightRequest="200"
            Style="{StaticResource Material}">
            
            <Border.StrokeShape>
                <RoundRectangle         
                    CornerRadius="20" />
            </Border.StrokeShape>

            <Grid
                Margin="10"
                ColumnDefinitions="*"
                RowDefinitions="*">

                <!--<ListView ItemsSource="{Binding TopMoversData}">
                <Label Text="{Binding BuyPrice}" TextColor="Black" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" FontSize="Body" FontAttributes="None" Margin="2,2,2,2"></Label>
                </ListView>-->

                <CollectionView ItemsSource="{Binding TopMoversData}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Label Text="{Binding Name}" FontAttributes="Bold" />
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </Grid>
            
        </Border>

    </VerticalStackLayout>
</ContentPage>